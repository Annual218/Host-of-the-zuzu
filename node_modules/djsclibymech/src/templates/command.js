const fs = require("fs");
const path = require("path");
const chalk = require("chalk");
const symbols = require("log-symbols");
const res = path.resolve;
module.exports = async function (token, prefix) {

    fs.readFile(
        res(path.join(__dirname, `..`, "baseFiles", "package.json")),
        "utf8",
        async (err, data) => {
            if (err) throw err;
            await fs.writeFileSync(res("package.json"), data, (err) =>
                console.log(err)
            );
            console.log(chalk.green(`${symbols.success} package.json was created!`));
        }
    );

    const config = res("config.json");
    await fs.writeFileSync(config,
        `{
            "token": "${token}",
            "prefix": "${prefix}"
        }`);
    console.log(chalk.green(`${symbols.success} config.json was created!`));

    const index = res("index.js");
    fs.readFile(
        path.join(__dirname, "..", "baseFiles", "index.js"),
        "utf8",
        async (err, data) => {
            if (err) throw err;
            await fs.writeFileSync(index, data, (err) => console.log(err));
            console.log(chalk.green(`${symbols.success} index.js was created!`));
        }
    );

    fs.mkdirSync(res("handlers"));
    fs.readFile(
        path.join(__dirname, "..", "baseFiles", "command.js"),
        "utf8",
        async (err, data) => {
            if (err) throw err;
            await fs.writeFileSync(res("handlers/command.js"), data, (err) =>
                console.log(err)
            );
            console.log(chalk.green(`${symbols.success} command.js was created!`));
        }
    );

    fs.readFile(
        path.join(__dirname, "..", "baseFiles", "event.js"),
        "utf8",
        async (err, data) => {
            if (err) throw err;
            await fs.writeFileSync(res("handlers/event.js"), data, (err) =>
                console.log(err)
            )
            console.log(chalk.green(`${symbols.success} event.js was created!`));
        }
    )

    fs.mkdirSync(res("events"));
    fs.readFile(
      path.join(__dirname, "..", "baseFiles", "ready.js"),
      "utf8",
      async (err, data) => {
        if (err) throw err;
        await fs.writeFileSync(res("events/ready.js"), data, (err) =>
          console.log(err)
        );
        console.log(chalk.green(`${symbols.success} ready.js was created!`));
      }
    );
    fs.readFile(
      path.join(__dirname, "..", "baseFiles", "message.js"),
      "utf8",
      async (err, data) => {
        if (err) throw err;
        await fs.writeFileSync(res("events/message.js"), data, (err) =>
          console.log(err)
        );
        console.log(chalk.green(`${symbols.success} message.js was created!`));
      }
    );

    fs.mkdirSync(res("commands"));
    fs.mkdirSync(res("commands/Info"));
    fs.readFile(
      path.join(__dirname, "..", "baseFiles", "ping.js"),
      "utf8",
      async (err, data) => {
        if (err) throw err;
        await fs.writeFileSync(res("commands/Info/ping.js"), data, (err) =>
          console.log(err)
        );
        console.log(chalk.green(`${symbols.success} ping.js was created!`));
        console.log(chalk.yellow(`${symbols.warning} Please Run `) + chalk.red(`npm install `) + chalk.yellow(`In The Terminal To Make Sure Your Bot Works`));
      }
    );
}