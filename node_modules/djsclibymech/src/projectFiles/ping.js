const Discord = require('discord.js')
const { prefix } = require('../../config.json')

module.exports = {
    name: 'ping',
    category: 'Info',
    description: 'get bot ping.',
    usage: `${prefix}ping`,
    cooldown: '0s',
    requiredUserPerms: ['VIEW_CHANNEL', 'SEND_MESSAGES'],
    requiredBotPerms: ['VIEW_CHANNEL', 'SEND_MESSAGES'],
    maxArgs: 'No Args',
    minArgs: 'No Args',
    expectedArgs: 'No Args',
    async execute(client, message, args) {
        message.channel.send(new Discord.MessageEmbed().setTitle('Pinging....')).then((resultMessage) => {
            const ping = resultMessage.createdTimestamp - message.createdTimestamp
            var embed = new Discord.MessageEmbed()
                .setDescription(`:hearts: My Ping Is: **${ping}ms.**\n🏓 API Ping Is: **${Math.round(client.ws.ping)}ms**\n:notepad_spiral: Average Ping Is: **${ping + 30}ms**`)
            resultMessage.delete()
            message.channel.send(embed)
        })
    }
}
